<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Beni`s Wetterstation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { height: 100%; }
    .blink { animation: blink 1.2s linear infinite; }
    @keyframes blink { 50% { opacity: .4 } }
    .spin { animation: spin linear infinite; }
    @keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
    .sunPulse { animation: sunPulse 6s ease-in-out infinite; transform-origin: center; }
    @keyframes sunPulse { 0%,100% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.05); opacity: .95 } }
    .cloudFloat { animation: cloudFloat 18s ease-in-out infinite; }
    @keyframes cloudFloat { 0%,100% { transform: translateX(0) } 50% { transform: translateX(-18px) } }
  </style>
</head>
<body class="h-screen w-screen overflow-hidden bg-black text-slate-100 antialiased">
  <div class="fixed inset-x-0 top-0 z-20 flex items-center justify-between px-4" style="padding-top: env(safe-area-inset-top);">
    <h1 class="text-lg font-bold drop-shadow">Beni`s Wetterstation</h1>
    <button id="refreshBtn" class="px-3 py-1.5 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur text-white text-sm">Aktualisieren</button>
  </div>

  <main class="h-[100svh] w-screen">
    <svg id="houseScene" viewBox="0 0 900 540" preserveAspectRatio="xMidYMid slice" class="h-full w-full">
      <defs>
        <linearGradient id="skyGradDay" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#cfeffd" />
          <stop offset="100%" stop-color="#eaf6ff" />
        </linearGradient>
        <linearGradient id="skyGradNight" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#0b1d3a" />
          <stop offset="100%" stop-color="#0f2350" />
        </linearGradient>
        <linearGradient id="roofGrad" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#f472b6" />
          <stop offset="100%" stop-color="#fb7185" />
        </linearGradient>
        <linearGradient id="wallGrad" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#f8fafc" />
          <stop offset="100%" stop-color="#e2e8f0" />
        </linearGradient>
        <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="3" stdDeviation="6" flood-opacity="0.18"/>
        </filter>
      </defs>

      <rect id="sky" width="900" height="540" fill="url(#skyGradDay)" />

      <!-- Sonne & Wolke korrigiert -->
      <g id="sunGroup" transform="translate(90,110)" filter="url(#shadow)" class="sunPulse">
        <circle r="50" fill="#ffd166" />
        <text id="uvValue" x="0" y="8" text-anchor="middle" font-size="20" font-weight="700" fill="#7c4a00">UV – --</text>
      </g>
      <g id="moonGroup" transform="translate(90,110)" opacity="0">
        <circle r="40" fill="#f1f5f9" />
        <circle r="36" cx="8" cy="-5" fill="#0f2350" />
      </g>
      <g id="cloudGroup" transform="translate(210,120)" filter="url(#shadow)" class="cloudFloat">
        <ellipse rx="64" ry="34" cx="0" cy="10" fill="#ffffff"/>
        <ellipse rx="50" ry="30" cx="-50" cy="22" fill="#ffffff"/>
        <ellipse rx="50" ry="30" cx="50" cy="22" fill="#ffffff"/>
        <text id="rainValue" x="0" y="65" text-anchor="middle" font-size="18" font-weight="600" fill="#334155">Regen: --</text>
      </g>

      <rect x="0" y="500" width="900" height="40" fill="#bbf7d0"/>

      <!-- Windrad -->
      <g id="windGroup" transform="translate(150,415)" filter="url(#shadow)">
        <line x1="0" y1="0" x2="0" y2="-90" stroke="#64748b" stroke-width="6"/>
        <g id="pinwheel" transform="translate(0,-90)">
          <circle r="6" fill="#64748b"/>
          <g id="vanes">
            <path d="M0,0 L0,-28 Q12,-22 16,-10 Z" fill="#94a3b8"/>
            <path d="M0,0 L28,0 Q22,12 10,16 Z" fill="#94a3b8"/>
            <path d="M0,0 L0,28 Q-12,22 -16,10 Z" fill="#94a3b8"/>
            <path d="M0,0 L-28,0 Q-22,-12 -10,-16 Z" fill="#94a3b8"/>
          </g>
        </g>
        <text id="windValue" x="-10" y="22" text-anchor="start" font-size="18" font-weight="700" fill="#0f172a">Wind: --</text>
      </g>

      <!-- Außenwerte -->
      <g id="outsidePanelLeft" transform="translate(195,245)" filter="url(#shadow)">
        <g id="windowTempOut" transform="translate(0,0)">
          <rect width="110" height="76" rx="16" ry="16" fill="#ffffff" stroke="#cbd5e1"/>
          <text id="tempOutValue" x="55" y="44" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">-- °C</text>
          <text x="55" y="64" text-anchor="middle" font-size="12" fill="#475569">Außen Temp</text>
        </g>
        <g id="windowHumOut" transform="translate(0,90)">
          <rect width="110" height="76" rx="16" ry="16" fill="#ffffff" stroke="#cbd5e1"/>
          <text id="humOutValue" x="55" y="44" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">-- %</text>
          <text x="55" y="64" text-anchor="middle" font-size="12" fill="#475569">Außen Feuchte</text>
        </g>
      </g>

      <!-- Haus nach links korrigiert -->
      <g id="houseGroup" transform="translate(515,335) scale(0.82)" filter="url(#shadow)">
        <ellipse cx="0" cy="230" rx="140" ry="18" fill="#000" opacity="0.12" />
        <polygon points="-95,0 0,-100 95,0" fill="url(#roofGrad)" stroke="#f43f5e" stroke-width="2"/>
        <rect x="48" y="-100" width="20" height="46" fill="#ef4444" stroke="#b91c1c"/>
        <circle cx="58" cy="-110" r="4.5" fill="#e5e7eb"/>
        <circle cx="64" cy="-118" r="6" fill="#e5e7eb" opacity=".7"/>
        <rect x="-90" y="0" width="180" height="220" rx="16" ry="16" fill="url(#wallGrad)" stroke="#cbd5e1" stroke-width="2"/>

        <g id="windowTempIn" transform="translate(-84,36)">
          <rect width="92" height="80" rx="14" ry="14" fill="#ffffff" stroke="#cbd5e1"/>
          <text id="tempInValue" x="46" y="44" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">-- °C</text>
          <text x="46" y="64" text-anchor="middle" font-size="12" fill="#475569">Innen Temp</text>
        </g>
        <g id="windowHumIn" transform="translate(-84,130)">
          <rect width="92" height="80" rx="14" ry="14" fill="#ffffff" stroke="#cbd5e1"/>
          <text id="humInValue" x="46" y="44" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">-- %</text>
          <text x="46" y="64" text-anchor="middle" font-size="12" fill="#475569">Innen Feuchte</text>
        </g>

        <g id="door" transform="translate(26,48)">
          <rect width="56" height="160" rx="12" ry="12" fill="#f59e0b" stroke="#a16207"/>
          <circle cx="42" cy="82" r="4" fill="#7c2d12"/>
        </g>
      </g>

      <g id="nightOverlay" opacity="0">
        <g fill="#ffffff">
          <circle cx="760" cy="90" r="1.2"/>
          <circle cx="700" cy="60" r="1.5"/>
          <circle cx="640" cy="120" r="1.1"/>
          <circle cx="500" cy="80" r="1.4"/>
          <circle cx="420" cy="50" r="1.2"/>
          <circle cx="240" cy="70" r="1.1"/>
          <circle cx="180" cy="140" r="1.3"/>
        </g>
      </g>

      <text id="timestamp" x="450" y="520" text-anchor="middle" font-size="14" fill="#334155">Letzte Aktualisierung: --</text>
    </svg>
  </main>

  <script>
    const CONFIG = {
      CHANNEL_ID: "YOUR_CHANNEL_ID_HERE",
      READ_API_KEY: "YOUR_READ_API_KEY_HERE",
      FIELD_MAPPING: { tempOutC: "field1", humOutPct: "field2", tempInC: "field3", humInPct: "field4", uvIndex: "field5", rainFlag: "field6", windMs: "field7" },
      UV_NIGHT_THRESHOLD: 0.1
    };
  </script>
</body>
</html>
